(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{25:function(e,t,a){e.exports=a(55)},30:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),s=a.n(c),i=(a(30),a(3)),l=a(17),r=a(5),d=a.n(r),u=a(18),m=a(8),h=a(19),v=a(20),N=a(23),f=a(21),b=a(24),k=(a(33),a(34),a(2)),E=a.n(k),y=a(6),p=a.n(y),g=a(7),w=a.n(g),x=a(22),C=a.n(x),B=(a(54),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(N.a)(this,Object(f.a)(t).call(this,e))).state={notebooks:[],currentBookIndex:0,notes:[],currentNote:null},a}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){var e=this;E.a.get("http://localhost:3100/notebooks").then(function(t){e.setState({notebooks:t.data});var a=t.data[e.state.currentBookIndex];e.loadNotes(a.id)})}},{key:"render",value:function(){var e=this,t=this.state.notebooks,a=this.state.currentNote;return o.a.createElement("div",{className:"app"},o.a.createElement("div",{className:"sidebar"},o.a.createElement("div",{className:"header"},o.a.createElement("button",{className:"button adder",onClick:function(){return e.handleAddNote()}},o.a.createElement("i",{className:"iconfont icon-add"}),"\u65b0\u5efa\u7b14\u8bb0")),o.a.createElement("div",{className:"body"},o.a.createElement("div",{className:"notebooks"},o.a.createElement("div",{className:"header has-icon"},o.a.createElement("i",{className:"iconfont icon-books"}),"\u7b14\u8bb0\u672c"),o.a.createElement("div",{className:"body"},o.a.createElement("ul",{className:"notebooks-list"},t.map(function(t,a){return o.a.createElement("li",{key:t.id,className:e.handleActiveClassName("currentBookIndex",["notebook-item"],a),onClick:function(){return e.handleSelectBook(a)}},o.a.createElement("div",{className:"title has-icon"},o.a.createElement("i",{className:"iconfont icon-book"}),t.name),o.a.createElement("button",{className:"button trash"},o.a.createElement("i",{className:"iconfont icon-trash"})))})))))),o.a.createElement("div",{className:"notes-panel"},o.a.createElement("div",{className:"header"},"\u8bfb\u4e66\u7b14\u8bb0"),o.a.createElement("div",{className:"body"},o.a.createElement("ul",{className:"notes-list"},this.state.notes.map(function(t,n){return o.a.createElement("li",{key:t.id},o.a.createElement("div",{className:p()("note-brief",{active:a&&a.id===t.id})},o.a.createElement("div",{className:"box",onClick:function(){return e.handleEditNote(t.id)}},o.a.createElement("div",{className:"header"},t.title),o.a.createElement("div",{className:"body"},t.body)),o.a.createElement("div",{className:"footer"},o.a.createElement("div",{className:"datetime"},e.handleDateTime(t.datetime)),o.a.createElement("button",{className:"trash button",onClick:function(){return e.handleDeleteNote(t.id)}},o.a.createElement("i",{className:"iconfont icon-trash"})))))})))),a?o.a.createElement("div",{className:"note-panel"},o.a.createElement("div",{className:"header"},o.a.createElement("div",{className:"category has-icon"},o.a.createElement("i",{className:"iconfont icon-notebook"}),"\u8bfb\u4e66\u7b14\u8bb0"),o.a.createElement("div",{className:"title"},o.a.createElement("input",{name:"title",type:"text",value:a.title,onChange:function(t){return e.handleFieldChange(t)}}))),o.a.createElement("div",{className:"body"},o.a.createElement("div",{className:"editor"},o.a.createElement("textarea",{name:"body",value:a.body,onChange:function(t){return e.handleFieldChange(t)},onKeyDown:function(t){return e.handlePressTab(t)}})),o.a.createElement("div",{className:"preview markdown-body"},o.a.createElement("div",{dangerouslySetInnerHTML:{__html:C()(a.body)}})))):null)}},{key:"handleActiveClassName",value:function(e,t,a){return p.a.apply(void 0,Object(m.a)(t).concat([{active:this.state[e]===a}]))}},{key:"handleSelectBook",value:function(e){this.setState({currentBookIndex:e});var t=this.state.notebooks[e];this.loadNotes(t.id)}},{key:"loadNotes",value:function(e){var t=this;E.a.get("http://localhost:3100/notes?bookId=".concat(e)).then(function(e){console.log(e.data),t.setState({notes:e.data})})}},{key:"handleDateTime",value:function(e){var t=new Date(e),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),c=t.getMinutes(),s=t.getTime(),i=(new Date).getTime()-s;return i<6e4?"\u521a\u521a":i>=6e4&&i<12e4?"1\u5206\u949f\u524d":i>=12e4&&i<18e4?"2\u5206\u949f\u524d":i>=18e4&&i<864e5?"\u4eca\u5929 ".concat(o,":").concat(c):i>=864e5&&i<1728e5?"\u6628\u5929 ".concat(o,":").concat(c):"".concat(a,"\u6708").concat(n,"\u65e5 ").concat(o,":").concat(c)}},{key:"handleAddNote",value:function(){var e=this,t={title:"\u65b0\u5efa\u7b14\u8bb0",body:"",datetime:(new Date).toISOString(),bookId:this.state.notebooks[this.state.currentBookIndex].id};E.a.post("http://localhost:3100/notes/",t).then(function(t){e.reloadNotes()})}},{key:"reloadNotes",value:function(){var e=this.state.notebooks[this.state.currentBookIndex].id;this.loadNotes(e)}},{key:"handleDeleteNote",value:function(){var e=Object(u.a)(d.a.mark(function e(t){return d.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.fire({title:"\u786e\u5b9a\u8981\u5220\u9664\u5417?",type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"\u786e\u5b9a",cancelButtonText:"\u53d6\u6d88"});case 2:if(!e.sent.value){e.next=8;break}return e.next=6,E.a.delete("http://localhost:3100/notes/".concat(t));case 6:w.a.fire({title:"\u5220\u9664\u6210\u529f\uff01",type:"success"}),this.reloadNotes();case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleEditNote",value:function(e){var t=this;E.a.get("http://localhost:3100/notes/".concat(e)).then(function(e){t.setState({currentNote:e.data})})}},{key:"handleFieldChange",value:function(e){var t=this,a=Object(l.a)({},this.state.currentNote,Object(i.a)({},e.target.name,e.target.value));this.setState({currentNote:a}),E.a.put("http://localhost:3100/notes/".concat(this.state.currentNote.id),a);var n=Object(m.a)(this.state.notes),o=n.findIndex(function(e){return e.id===t.state.currentNote.id});-1!==o&&(n[o]=a,this.setState({notes:n}))}},{key:"handlePressTab",value:function(e){if(9===e.keyCode){var t=e.target.selectionStart,a=e.target.selectionEnd,n=e.target.value;e.target.value=n.substring(0,t)+"\t"+n.substring(a),e.target.selectionStart=e.target.selectionEnd=t+1,e.preventDefault(),this.handleFieldChange(e)}}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(o.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[25,1,2]]]);
//# sourceMappingURL=main.4ff83f7c.chunk.js.map